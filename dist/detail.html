<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>详情页</title>
    <link rel="stylesheet" href="css/detail.css">
    <link rel="stylesheet" href="font/iconfont.css">
    <script src="js/jquery-1.11.0.js"></script>
</head>

<body>
    <header id="header">
        <div id="headMessage">
            <!-- 左边 -->
            <ul class="fl">
                <li>
                    <span>中国大陆</span>
                    <span class="iconfont icon-jiantouxia"></span>
                </li>
                <li><a href="login.html" class="login">亲,请登录</a></li>
                <li><a href="register.html">免费注册</a></li>
                <li><a href="#">手机淘宝</a></li>
            </ul>
            <!-- 右边 -->
            <ul class="fr">
                <li>
                    <a href="index.html">我的淘宝</a>
                    <span class="iconfont icon-jiantouxia"></span>
                    <ul>
                        <li><a href="#">已买到的宝贝</a></li>
                        <li><a href="#">我的足迹</a></li>
                    </ul>
                </li>
                <li>
                    <span class="iconfont icon-gouwuchefill"></span>
                    <a href="cart.html">购物车</a>
                    <span class="iconfont icon-jiantouxia"></span>
                </li>
                <li>
                    <span class="iconfont icon-shoucang"></span>
                    <a href="#">收藏夹</a>
                    <span class="iconfont icon-jiantouxia"></span>
                    <ul>
                        <li><a href="#">收藏的宝贝</a></li>
                        <li><a href="#">收藏的店铺</a></li>
                    </ul>
                </li>
                <li><a href="#">商品分类</a></li>
                <li><a href="#">免费开店</a></li>
                <li class="line">|</li>
                <li>
                    <a href="#">千牛卖家中心</a>
                    <span class="iconfont icon-jiantouxia"></span>
                    <ul>
                        <li><a href="#">免费开店</a></li>
                        <li><a href="#">已卖出的宝贝</a></li>
                        <li><a href="#">出售中的宝贝</a></li>
                        <li><a href="#">卖家服务市场</a></li>
                        <li><a href="#">卖家培训中心</a></li>
                        <li><a href="#">体检中心</a></li>
                        <li><a href="#">问商友</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">联系客服</a>
                    <span class="iconfont icon-jiantouxia"></span>
                    <ul>
                        <li><a href="#">消费者客服</a></li>
                        <li><a href="#">商家服务大厅</a></li>
                    </ul>
                </li>
                <li>
                    <span class="iconfont icon-caidan"></span>
                    <a href="#">网站导航</a>
                    <span class="iconfont icon-jiantouxia"></span>
                </li>
            </ul>
        </div>
    </header>
    <main>
        <div id="login">
            <div class="login-hd">
                <h1><a href="index.html"><img src="img/logo.png" alt=""></a></h1>
                <div class="seek">
                    <ul class="leftul">
                        <li>宝贝<span class="iconfont icon-jiantouxia"></span></li>
                        <li><a href="#">天猫</a></li>
                        <li><a href="#">店铺</a></li>
                    </ul>
                    <input id="input" type="text">
                    <span class="iconfont icon-RectangleCopy"></span>
                    <span class="iconfont icon-zhaoxiangji"></span>
                    <button>搜索</button>
                </div>
            </div>
        </div>
        <div id="content">
            <!-- 放大镜和数据 -->
            <div class="con">
                <!-- 放大镜 -->
                <div id="fangdajing">
                    <div class="zoomBox">
                        <div class="midArea">
                            <!-- <img src="img/t1_.webp" alt=""> -->
                            <div class="zoom"></div>
                        </div>
                        <div class="bigArea">
                            <!-- <img src="img/t1_.webp" alt=""> -->
                        </div>
                        <div class="smallArea">
                            <!-- <img src="img/t1_.webp" alt=""> -->
                        </div>
                    </div>
                </div>

                <div class="particulars">
                    <div class="pname">
                        <p></p>
                    </div>
                    <div class="dprice">
                        <span>价格</span>
                        <span>￥</span>
                        <p>123</p>
                    </div>
                    <div class="count">
                        <span>数量</span>
                        <p class="jian">-</p>
                        <input type="text" class="num">
                        <p class="jia">+</p>
                    </div>
                    <input class="button" type="button" value="加入购物车">
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="footrt_hd">
            <p>
                <a>阿里巴巴集团</a><b>|</b>
                <a>淘宝网</a><b>|</b>
                <a>天猫</a><b>|</b>
                <a>聚划算</a><b>|</b>
                <a>全球速买通</a><b>|</b>
                <a>阿里巴巴国际交易市场</a><b>|</b>
                <a>1688</a><b>|</b>
                <a>阿里妈妈</a><b>|</b>
                <a>飞猪</a><b>|</b>
                <a>淘小铺</a><b>|</b>
                <a>阿里云计算</a><b>|</b>
                <a>AliOS</a><b>|</b>
                <a>阿里通信</a><b>|</b>
                <a>一淘</a><b>|</b>
                <a>万网</a><b>|</b>
                <a>高德</a><b>|</b>
                <a>UC</a><b>|</b>
                <a>友盟</a><b>|</b>
                <a>阿里安全</a><br>
                <a>虾米</a><b>|</b>
                <a>大麦网</a><b>|</b>
                <a>钉钉</a><b>|</b>
                <a>支付宝</a><b>|</b>
                <a>优酷</a><b>|</b>
                <a>土豆</a><b>|</b>
                <a>阿里健康</a><b>|</b>
                <a>阿里影业</a><b>|</b>
                <a>阿里体育</a><b>|</b>
                <a>网商银行</a>
            </p>

        </div>
        <div class="footrt_bd">
            <p>
                <a href="#">关于淘宝</a>
                <a href="#">合作伙伴</a>
                <a href="#">营销中心</a>
                <a href="#">廉正举报</a>
                <a href="#">联系客服</a>
                <a href="#">开放平台</a>
                <a href="#">诚征英才</a>
                <a href="#">联系我们</a>
                <a href="#">网络地图</a>
                <a href="#">隐私权政策</a>
                <a href="#">法律声明</a>
                <a href="#">知识产权</a>
                <b>|</b>
                <em>© 2003-现在 Taobao.com 版权所有</em>
            </p>
            <p>
                <a href="#">增值电信业务经营许可证：浙B2-20080224</a>
                <b>|</b>
                <a href="#">增值电信业务经营许可证（跨地区）： B2-20150210</a>
                <b>|</b>
                <a href="#">浙网文（2019）1033-086号</a>
                <b>|</b>
                <span>浙江省网络食品销售第三方平台提供者备案：浙网食A33010001</span>
            </p>
            <p>
                <span>互联网药品信息服务资格证书（浙）-经营性-2018-0010</span>
                <b>|</b>
                <span>短消息类服务接入代码使用证书:号【2016】00154-A01</span>
                <b>|</b>
                <span>信息网络传播视听许可证:1109364号</span>
                <b>|</b>
                <span>出版物网络交易平台服务经营备案号:新出发浙备字第002号</span>
            </p>
            <p>
                <a href="#">浙公网安备 33010002000078号</a>
                <b>|</b>
                <a href="#">浙B2-20080224-1</a>
                <b>|</b>
                <span>广播电视节目制作经营许可证（浙）字第01012号</span>
                <b>|</b>
                <span>市场名称登记证：工商网市字3301004120号</span>
                <b>|</b>
                <span>医疗器械网络交易服务第三方平台备案：（浙）网械平台备字[2018]第00004号</span>
            </p>
        </div>
    </footer>
</body>
<script>

</script>
<script>
    $(function () {
        let id = location.search.split("=")[1];
        console.log(id);
        $.get("http://jx.xuzhixiang.top/ap/api/detail.php", {
            id: id
        }).then(res => {
            console.log(res);
            $(".zoomBox").html(`<div class="midArea">
                            <a href="detail.html?id=${res.data.pid}">
                                <img src="${res.data.pimg}" alt="">
                                <div class="zoom"></div></a>
                            </div>
                            <div class="bigArea">
                                <img src="${res.data.pimg}" alt="">
                             </div>
                            <div class="smallArea">
                                <img src="${res.data.pimg}" alt="">
                            </div>`);
            $(".pname").html(`<p>${res.data.pname}</P>`);
            $(".dprice").html(` <span>价格</span>
                            <span>￥</span>
                            <p>${res.data.pprice}</p>`)
            $(".button").click(function () {
                location.href = "cart.html"
            })

            function Zoom() {
                this.zoomBox = document.querySelector(".zoomBox");
                this.midArea = document.querySelector(".midArea");
                this.midImg = this.midArea.children[0];
                this.zoom = document.querySelector(".zoom");
                this.bigArea = document.querySelector(".bigArea");
                this.bigImg = this.bigArea.children[0];
                this.smallArea = document.querySelector(".smallArea")
                this.smllImg = this.smallArea.children
            }
            Zoom.prototype.start = function () {
                this.midArea.onmouseover = () => {
                    this.zoom.style.display = "block";
                    this.bigArea.style.display = "block";
                }
                this.midArea.onmouseout = () => {
                    this.zoom.style.display = "none";
                    this.bigArea.style.display = "none";
                }
                this.midArea.onmousemove = (e) => {
                    let evt = e || event;
                    let x = evt.pageX - this.zoomBox.offsetLeft;
                    let y = evt.pageY - this.zoomBox.offsetTop;
                    let l = x - this.zoom.offsetWidth / 2;
                    let t = y - this.zoom.offsetHeight / 2;


                    let mw = this.zoomBox.offsetWidth - this.zoom.offsetWidth;
                    let mh = this.zoomBox.offsetHeight - this.zoom.offsetHeight;

                    l = l <= 0 ? 0 : l >= mw ? mw : l;
                    t = t <= 0 ? 0 : t >= mh ? mh : t;

                    this.zoom.style.left = l + "px";
                    this.zoom.style.top = t + "px";



                    this.bigImg.style.left = -this.zoom.offsetLeft / this.midArea.offsetWidth *
                        this.bigImg
                        .offsetWidth + "px";

                    this.bigImg.style.top = -this.zoom.offsetTop / this.midArea.offsetHeight *
                        this.bigImg
                        .offsetHeight + "px";


                }
                for (let i = 0; i < this.smllImg.length; i++) {
                    this.smllImg[i].onclick = () => {
                        this.bigImg.src = this.midImg.src = this.smllImg[i].src;
                    }

                }

            }
            let zoom = new Zoom();
            zoom.start()
        })
    })
</script>

</html>